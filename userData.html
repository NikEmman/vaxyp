<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="logo.png" type="image/x-icon" />
    <link rel="stylesheet" href="style.css" />
    <title>Στοιχεία χρήστη</title>
  </head>
  <body>
    <header><a href="index.html"> Επιστροφή στην αρχική σελίδα</a></header>
    <h2>Συμπληρώστε τη φόρμα με τα τοπικά σας δεδομένα</h2>
    <form id="dataForm">
      <div>
        <div class="containerAnakritikoi">
          <div id="anakritikoiContainer">
            <label for="anakritikoi">Ανακριτικοί (Γενική):</label>
            <input
              type="text"
              name="anakritikoi[]"
              placeholder="Αρχ/κα ΠΑΠΠΑ Ανέστη"
            />
          </div>
          <div id="anakritikoiEnikosContainer">
            <label for="anakritikoiEnikos">Ανακριτικοί (Ενικός):</label>
            <input
              type="text"
              name="anakritikoiEnikos[]"
              placeholder="Αρχ/κας ΠΑΠΠΑΣ Ανέστης"
            />
          </div>
        </div>
        <div class="anakritikoiBtns">
          <button type="button" id="addAnakritikoi">
            Προσθήκη Ανακριτικού
          </button>
          <button type="button" id="removeAnakritikoi">
            Αφαίρεση Ανακριτικού
          </button>
        </div>
      </div>

      <div>
        <label for="ypiresia">Υπηρεσία:</label><br />
        <input
          type="text"
          id="ypiresia"
          name="ypiresia"
          placeholder="Τ.Δ.Ε.Ε. Κομοτηνής"
        /><br /><br />
        <label for="doy">ΔΟΥ:</label><br />
        <input
          type="text"
          id="doy"
          name="doy"
          placeholder="Κομοτηνής"
        /><br /><br />
        <label for="merosSyntaksisEkthesis">Μέρος Σύνταξης Έκθεσης:</label
        ><br />
        <input
          type="text"
          id="merosSyntaksisEkthesis"
          name="merosSyntaksisEkthesis"
          placeholder="Κομοτηνή"
        /><br /><br />
        <label for="xronosPeratosis">Χρόνος Περάτωσης:</label><br />
        <input
          type="number"
          id="xronosPeratosis"
          name="xronosPeratosis"
          min="0"
          placeholder="10"
        /><br /><br />
        <label for="eisaggeleiaProtodikon">Εισαγγελία Πρωτοδικών:</label><br />
        <input
          type="text"
          id="eisaggeleiaProtodikon"
          name="eisaggeleiaProtodikon"
          placeholder="Ροδόπης"
        /><br /><br />
        <label for="dieuthynsiYpiresias">Διεύθυνση Υπηρεσίας:</label><br />
        <input
          type="text"
          id="dieuthynsiYpiresias"
          name="dieuthynsiYpiresias"
          placeholder="Λ Δημοκρατίας αρ. 3"
        /><br /><br />
        <label for="tilefono">Τηλέφωνο:</label><br />
        <input
          type="text"
          id="tilefono"
          name="tilefono"
          placeholder="25314 40177"
          minlength="10"
          maxlength="10"
        /><br /><br />
        <label for="email">Email:</label><br />
        <input
          type="email"
          id="email"
          name="email"
          placeholder="ta.komotinis@astynomia.gr"
        /><br /><br />
        <button type="button" id="submitForm">Αποθήκευση</button>
      </div>
    </form>

    <script>
      document
        .getElementById("addAnakritikoi")
        .addEventListener("click", function () {
          const container = document.getElementById("anakritikoiContainer");
          const input = document.createElement("input");
          input.type = "text";
          input.name = "anakritikoi[]";
          input.placeholder = "Αρχ/κα ΠΑΠΠΑ Ανέστη";
          container.appendChild(input);
          const containerEnikos = document.getElementById(
            "anakritikoiEnikosContainer"
          );
          const inputEnikos = document.createElement("input");
          inputEnikos.type = "text";
          inputEnikos.name = "anakritikoiEnikos[]";
          inputEnikos.placeholder = "Αρχ/κας ΠΑΠΠΑΣ Ανέστης";
          containerEnikos.appendChild(inputEnikos);
        });
      document
        .getElementById("removeAnakritikoi")
        .addEventListener("click", () => {
          const anakritikoiContainer = document.getElementById(
            "anakritikoiContainer"
          );
          const anakritikoiEnikosContainer = document.getElementById(
            "anakritikoiEnikosContainer"
          );
          const anakritikoi = document.querySelectorAll(
            "input[name='anakritikoi[]']"
          );
          const anakritikoiEnikos = document.querySelectorAll(
            "input[name='anakritikoiEnikos[]']"
          );
          if (anakritikoi.length > 1) {
            anakritikoiContainer.removeChild(
              anakritikoi[anakritikoi.length - 1]
            );
            anakritikoiEnikosContainer.removeChild(
              anakritikoiEnikos[anakritikoiEnikos.length - 1]
            );
          }
        });

      document
        .getElementById("submitForm")
        .addEventListener("click", function () {
          const formData = new FormData(document.getElementById("dataForm"));
          const anakritikoi = formData.getAll("anakritikoi[]");
          const anakritikoiEnikos = formData.getAll("anakritikoiEnikos[]");
          const data = {
            anakritikoi: anakritikoi,
            anakritikoiEnikos: anakritikoiEnikos,
            ypiresia: formData.get("ypiresia"),
            doy: formData.get("doy"),
            merosSyntaksisEkthesis: formData.get("merosSyntaksisEkthesis"),
            xronosPeratosis: Number(formData.get("xronosPeratosis")),
            eisaggeleiaProtodikon: formData.get("eisaggeleiaProtodikon"),
            dieuthynsiYpiresias: formData.get("dieuthynsiYpiresias"),
            tilefono: formData.get("tilefono"),
            email: formData.get("email"),
          };
          // Save to local storage
          localStorage.setItem("dataObject", JSON.stringify(data));

          // Create a downloadable JSON file
          const blob = new Blob([JSON.stringify(data, null, 2)], {
            type: "application/json",
          });
          const url = URL.createObjectURL(blob);
          const a = document.createElement("a");
          a.href = url;
          a.download = "data.json";
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
        });
    </script>
  </body>
</html>
